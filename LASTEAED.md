# Aletheia AI ‚Äî Selgitus lastele ja t√§iskasvanutele

**Keeruliste asjade lihtne selgitus neile, kes tahavad m√µista kr√ºptograafiat ja testimist "kapoti all".**

---

## K√µige v√§iksematele: Mis see projekt on?

### Kujuta ette v√µluabilist

Kas sa tead, mis on ChatGPT v√µi teised "targad abilised"? See on nagu v√µlus√µber arvutis, kes oskab vastata k√ºsimustele, kirjutada lugusid ja aidata kodut√∂√∂dega.

Aga on √ºks probleem...

### Probleem: "Kas ta t√µesti nii √ºtles?"

Kujuta ette sellist olukorda:

```
Sina: "Ema, robot √ºtles, et v√µib j√§√§tist √µhtus√∂√∂giks s√º√ºa!"
Ema: "T√µesti? N√§ita!"
Sina: *n√§itad ekraani*
Ema: "Aga √§kki sa ise kirjutasid selle ja √ºtled, et see on robot?"
```

Kuidas **t√µestada**, et robot t√µesti nii √ºtles?

### Lahendus: V√µlupitser

Meie projekt on nagu **v√µlupitser** roboti vastustele.

Kui robot vastab, siis me:
1. **Pildistame** tema vastuse (aga eriliselt ‚Äî seda nimetatakse "r√§si")
2. **Paneme pitseri** ‚Äî "Jah, see on t√µeline vastus!" (seda nimetatakse "allkiri")
3. **Kirjutame aja √ºles** ‚Äî "See oli kell 3 p√§eval!" (seda nimetatakse "ajatempel")

N√º√ºd **keegi ei saa**:
- Muuta vastust (pitser l√§heb katki)
- √ñelda "see polnud mina" (allkiri on olemas)
- Valetada aja kohta (ajatempel on olemas)

### Lihtne pilt

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                             ‚îÇ
‚îÇ   ü§ñ Robot √ºtleb: "2 + 2 = 4"                              ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ         ‚Üì                                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   üì∏ Pildistame (r√§si): "abc123..."                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ         ‚Üì                                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   üîè Paneme pitseri (allkiri): "See on t√µsi!"              ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ         ‚Üì                                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   üïê Kirjutame aja: "30. jaanuar 2026, 15:00"              ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ         ‚Üì                                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   ‚úÖ N√º√ºd on see T√ïESTATAV!                                ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Milleks seda p√§riselus vaja on?

1. **Arst k√ºsib robotilt** ravimi kohta ‚Üí peab t√µestama, et robot just seda soovitas
2. **Jurist kasutab robotit** lepingu jaoks ‚Üí peab kohtus t√µestama
3. **√ïpetaja kontrollib** ‚Äî kas √µpilane kirjutas ise v√µi robot aitas?
4. **Firma teeb otsuse** roboti n√µuande p√µhjal ‚Üí vaja "t≈°ekki" auditi jaoks

### Miks seda nimetatakse "Aletheia"?

**Aletheia** (·ºàŒªŒÆŒ∏ŒµŒπŒ±) ‚Äî see on vanakreeka s√µna.

See t√§hendab **"t√µde"** v√µi **"seda, mis pole varjatud"**.

Vanad kreeklased uskusid, et t√µde on siis, kui eemaldad k√µik katted ja n√§ed asju sellistena, nagu nad on.

Meie projekt teeb sama: **n√§itab t√µde** selle kohta, mida robot √ºtles.

---

## Tulevik: Kuhu me l√§heme?

### Maailm, kus tehisintellekt on k√µikjal

M√µne aasta p√§rast robotabilised v√µivad PKI-d kasutada selleks, et:
üöó Juhivad autosid
ü©∫ Panevad diagnoose
üè≠ Juhivad tehaseid
üí∞ Teevad finantsotsuseid
‚öñÔ∏è Aitavad kohtutes

**K√ºsimus:** Kuidas usaldada nende otsuseid?

### PKI tehisintellektile ‚Äî mida see t√§hendab

**PKI** (Public Key Infrastructure) ‚Äî see on "digitaalsete passide" ja "pitserite" s√ºsteem.

Praegu kasutatakse PKI j√§rgmistel eesm√§rkidel:
üîí Turvalised veebisaidid (brauseris)
‚úçÔ∏è Dokumentide elektrooniline allkirjastamine
üí∏ Pangalised √ºlekanded
üìß Turvaline e-post (S/MIME)
üßë‚Äçüíª Kasutajate autentimine ettev√µtte s√ºsteemides (VPN, portaalid)
ü§ñ Kaitstud IoT-kommunikatsioon (tark kodu, t√∂√∂stusautomaatika)
üñ•Ô∏è Tarkvara allkirjastamine ja kontroll (code signing)
üí¨ Turvalised s√µnumid ja vestlused
üÜî Digipassid ja ID-kaardid
üó≥Ô∏è Elektrooniline h√§√§letamine ja k√ºsitlused
‚òÅÔ∏è Pilvandmete kr√ºpteerimine
üè¢ Juurdep√§√§su kontroll kriitilistes s√ºsteemides (serverid, andmekeskused)
üìú Dokumentide kaitse ja kontroll riigiteenustes (sertifikaadid, litsentsid)

**Tulevik:** PKI tehisintellektile t√§hendab:
- Igal AI-agendil on oma "pass" (sertifikaat)
- Iga AI otsus on allkirjastatud ja t√µestatav
- Saab j√§lgida ahelat: kes l√µi AI ‚Üí kes √µpetas ‚Üí mida otsustas

### Arengu teekaart

```
Praegu (PoC)
‚îú‚îÄ‚îÄ ‚úÖ LLM vastuste allkirjastamine
‚îú‚îÄ‚îÄ ‚úÖ Ajatemplid (RFC 3161)
‚îî‚îÄ‚îÄ ‚úÖ Tegevuste audit-logi

J√§rgmine etapp
‚îú‚îÄ‚îÄ üîú AI-agentide sertifikaadid (X.509)
‚îú‚îÄ‚îÄ üîú Usaldusahel: Arendaja ‚Üí Mudel ‚Üí Agent
‚îú‚îÄ‚îÄ üîú Treeninguandmete allkirjastamine
‚îî‚îÄ‚îÄ üîú Mudelite versioonihaldus allkirjaga

Edasij√µudnute tase
‚îú‚îÄ‚îÄ üìã Kvalifitseeritud allkirjad (eIDAS tase 3)
‚îú‚îÄ‚îÄ üìã Juriidiliselt siduvad AI otsused
‚îú‚îÄ‚îÄ üìã Rahvusvaheline tunnustamine (EL, USA, Aasia)
‚îî‚îÄ‚îÄ üìã ISO standard AI Audit Traili jaoks

Kaugem tulevik
‚îú‚îÄ‚îÄ üöÄ AI detsentraliseeritud identifitseerimine (DID)
‚îú‚îÄ‚îÄ üöÄ Plokiahel muutmatu auditi jaoks
‚îú‚îÄ‚îÄ üöÄ Ise-allkirjastavad autonoomsed agendid
‚îî‚îÄ‚îÄ üöÄ AI "elektroonilise isiku" √µiguslik staatus
```

### Konkreetsed PKI-funktsioonid arenduseks

| Funktsioon | Kirjeldus | Kasu |
|------------|-----------|------|
| **AI Agent Certificates** | X.509 sertifikaat igale agendile | Identifitseerimine "kes see AI on" |
| **Model Signing** | N√§rviv√µrgu kaalude allkirjastamine | T√µestus "seda mudelit pole asendatud" |
| **Training Data Attestation** | Andmestiku allkirjastamine | T√µestus "millel √µpetati" |
| **Decision Chain Signatures** | Iga arutlussammu allkirjastamine | Selgitatavus "miks nii otsustas" |
| **Delegation Certificates** | Sertifikaat "AI tegutseb inimese nimel" | Juriidiline vastutus |
| **Revocation for AI** | "Halva" AI sertifikaadi t√ºhistamine | Kaitse kompromiteeritud agentide eest |
| **Cross-Border Recognition** | Vastastikune tunnustamine riikide vahel | Globaalsed AI-teenused |

### Miks see on √ºhiskonnale oluline

```
Ilma PKI-ta AI jaoks:
‚îú‚îÄ‚îÄ ‚ùå V√µimatu t√µestada, mida AI √ºtles
‚îú‚îÄ‚îÄ ‚ùå V√µimatu vastutusele v√µtta
‚îú‚îÄ‚îÄ ‚ùå V√µltsitud AI vastused
‚îú‚îÄ‚îÄ ‚ùå Pole usaldust automaatsete otsuste vastu
‚îî‚îÄ‚îÄ ‚ùå Regulaatorid keelavad AI kriitilistes valdkondades

PKI-ga AI jaoks:
‚îú‚îÄ‚îÄ ‚úÖ Iga otsus on t√µestatav
‚îú‚îÄ‚îÄ ‚úÖ Selge vastutusahel
‚îú‚îÄ‚îÄ ‚úÖ Kaitse v√µltsimise eest
‚îú‚îÄ‚îÄ ‚úÖ √Ñri ja kodanike usaldus
‚îî‚îÄ‚îÄ ‚úÖ AI saab t√∂√∂tada meditsiinis, √µiguses, rahanduses
```

### Aletheia kui vundament

Meie projekt on **esimene telliskivi** selles hoones.

Me n√§itame, et juba t√§na saab:
- Allkirjastada AI vastuseid
- Panna ajatempleid
- Luua audit traili
- Olla eIDAS-iga √ºhilduv

See on **proof of concept** (kontseptsiooni t√µestus), mida saab arendada t√§ielikuks s√ºsteemiks.

---

## Sisukord (p√µhidokument)

1. [Projekti p√µhiidee](#1-projekti-p√µhiidee)
2. [Mis on kr√ºptograafia lihtsate s√µnadega](#2-mis-on-kr√ºptograafia-lihtsate-s√µnadega)
3. [R√§simine (SHA-256)](#3-r√§simine-sha-256)
4. [Digitaalallkiri (RSA)](#4-digitaalallkiri-rsa)
5. [Ajatemplid (RFC 3161)](#5-ajatemplid-rfc-3161)
6. [PKI ‚Äî Avaliku v√µtme infrastruktuur](#6-pki--avaliku-v√µtme-infrastruktuur)
7. [eIDAS ‚Äî Euroopa usaldusreeglid](#7-eidas--euroopa-usaldusreeglid)
8. [MOCK_TSA ‚Äî Simulaator testide jaoks](#8-mock_tsa--simulaator-testide-jaoks)
9. [Cryptographic Oracle ‚Äî Etalonvastused](#9-cryptographic-oracle--etalonvastused)
10. [Golden Fixtures ‚Äî Kuldsed n√§idised](#10-golden-fixtures--kuldsed-n√§idised)
11. [Testimine ‚Äî Miks seda vaja on](#11-testimine--miks-seda-vaja-on)
12. [Agent Audit Model ‚Äî AI tegevuste audit](#12-agent-audit-model--ai-tegevuste-audit)
13. [Mida me t√§na lisasime](#13-mida-me-t√§na-lisasime)
14. [Terminite s√µnastik](#14-terminite-s√µnastik)

---

## 1. Projekti p√µhiidee

### Probleem

Kujuta ette: sa k√ºsisid ChatGPT-lt n√µu, ta vastas. N√§dala p√§rast tahad s√µbrale t√µestada, et AI t√µesti nii √ºtles. Kuidas seda teha?

**Kuidagi mitte.** Sa ei saa t√µestada:
- Et AI t√µesti selle kirjutas (mitte sina ise)
- Millal t√§pselt ta selle kirjutas
- Et teksti pole muudetud

### Aletheia AI lahendus

Me teeme nii, et **iga AI vastust saab t√µestada**:

```
AI kirjutas teksti ‚Üí me "pitseerisime" selle kr√ºptograafiliselt ‚Üí saab kontrollida
```

**Aletheia** (·ºàŒªŒÆŒ∏ŒµŒπŒ±) ‚Äî kreeka s√µna, mis t√§hendab "t√µde" v√µi "paljastamine". Filosoofid kasutasid seda t√§histamaks "seda, mis pole varjatud".

Meie projekt on **t√µestatav t√µde AI-lt**.

---

## 2. Mis on kr√ºptograafia lihtsate s√µnadega

### Analoogia √ºmbrikutega

Kujuta ette kolme t√º√ºpi √ºmbrikuid:

1. **Tavaline √ºmbrik** ‚Äî iga√ºks saab avada ja lugeda
2. **Pitseeritud √ºmbrik** ‚Äî n√§ha, kui keegi avas
3. **Seif koodiga** ‚Äî ainult sina saad avada

Kr√ºptograafia on teadus "digitaalsetest √ºmbrikutest":

| √úlesanne | Analoogia | Kr√ºptograafiline meetod |
|----------|-----------|------------------------|
| Kontrollida, et teksti pole muudetud | Pitser √ºmbrikul | **R√§simine** |
| T√µestada, kes on autor | Allkiri dokumendil | **Digitaalallkiri** |
| Fikseerida aeg | Postmark | **Ajatempel** |
| Varjata sisu | Seif koodiga | Kr√ºpteerimine (pole selles projektis) |

### Oluline m√µista

Aletheia AI-s me **EI KR√úPTEERI** AI vastuseid. Me:
- **Allkirjastame** ‚Äî et t√µestada autorlust
- **Templime ajaga** ‚Äî et t√µestada, millal see oli
- **R√§sime** ‚Äî et avastada igasugused muudatused

Tekst j√§√§b loetavaks, aga n√º√ºd saab seda **kontrollida**.

---

## 3. R√§simine (SHA-256)

### Mis see on

**R√§si** ‚Äî see on "s√µrmej√§lg" andmete jaoks.

Nagu igal inimesel on unikaalne s√µrmej√§lg, on igal tekstil unikaalne r√§si.

### Kuidas t√∂√∂tab

```
Tekst: "Tere, maailm!"
         ‚Üì
    [ SHA-256 ]
         ‚Üì
R√§si: "a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e"
```

### R√§si omadused

1. **Sama sisend ‚Üí sama v√§ljund**
   - "Tere" annab alati sama r√§si
   - Seda nimetatakse **determinism**

2. **V√§ike muudatus ‚Üí t√§iesti erinev r√§si**
   - "Tere" ja "tere" (v√§ike t√§ht) annavad ERINEVAD r√§sid
   - Seda nimetatakse **laviiniefekt**

3. **R√§sist ei saa teksti taastada**
   - Teades r√§si, on v√µimatu teada saada algset teksti
   - See on **√ºhesuunaline funktsioon**

4. **Fikseeritud suurus**
   - SHA-256 annab alati 64 s√ºmbolit (256 bitti)
   - Pole vahet, kas see on √ºks s√µna v√µi terve raamat

### N√§ide elust

Kujuta ette, et sa annad eksamit. √ïpetaja √ºtleb:
> "V√µta oma vastus, lase l√§bi r√§si-masina, √ºtle mulle number."

Sa √ºtled: **"a591a6d40bf4..."**

N√º√ºd:
- √ïpetaja **ei tea** sinu vastust
- Aga kui sa hiljem muudad vastust, r√§si **muutub**
- √ïpetaja saab kohe aru, et sa sohki tegid

### SHA-256 Aletheia's

```java
// Meie kood teeb seda:
String text = "AI vastus: Prantsusmaa pealinn on Pariis.";
byte[] hash = sha256(text.getBytes());
// hash = "b94d27b9934d3e08a52e52d7da7dabfac484efe37a5380ee9088f7ace2efcde9"
```

N√º√ºd see r√§si on AI vastuse "s√µrmej√§lg".

---

## 4. Digitaalallkiri (RSA)

### Miks allkirja vaja on

R√§si t√µestab, et teksti pole muudetud. Aga **kes** selle l√µi?

Digitaalallkiri on viis √∂elda:
> "Mina, selle v√µtme omanik, kinnitan seda dokumenti."

### Kuidas t√∂√∂tab (lihtsustatud)

Sul on kaks v√µtit ‚Äî nagu kaks puslet√ºkki:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PRIVAATNE      ‚îÇ      ‚îÇ  AVALIK         ‚îÇ
‚îÇ  (salajane)     ‚îÇ      ‚îÇ  (avalik)       ‚îÇ
‚îÇ                 ‚îÇ      ‚îÇ                 ‚îÇ
‚îÇ  Ainult sinul   ‚îÇ      ‚îÇ  K√µigil         ‚îÇ
‚îÇ  Allkirjastamiseks ‚îÇ   ‚îÇ  Kontrollimiseks ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Allkirjastamise protsess:**

```
Dokumendi r√§si + Privaatne v√µti ‚Üí Allkiri
```

**Kontrollimise protsess:**

```
Allkiri + Avalik v√µti ‚Üí R√§si (peab kattuma originaaliga)
```

### Analoogia vahapitsatiga

Keskajal kuningad pitseerisid kirju vahaga isikliku pitseriga:
- Ainult kuningal oli **pitser** (privaatne v√µti)
- K√µik teadsid, kuidas **j√§ljend** v√§lja n√§eb (avalik v√µti)
- Pitserit v√µltsida oli v√§ga raske

Digitaalallkiri on "matemaatiline vahapitser".

### RSA PKCS#1 v1.5

**RSA** ‚Äî see on algoritm, mille leiutasid 1977. aastal kolm teadlast (Rivest, Shamir, Adleman).

**PKCS#1 v1.5** ‚Äî see on standard, kuidas t√§pselt RSA-d allkirjade jaoks kasutada.

Miks me just seda kasutame:
- **Deterministlik** ‚Äî sama sisend ‚Üí sama allkiri
- **L√§biproovitud** ‚Äî kasutatakse 40+ aastat
- **√úhilduv** ‚Äî t√∂√∂tab k√µikjal

### Aletheia koodis

```java
// Allkirjastame AI vastuse r√§si
byte[] hash = sha256(aiResponse);
byte[] signature = signWithRSA(hash, privateKey);

// N√º√ºd iga√ºks saab kontrollida:
boolean valid = verifyWithRSA(hash, signature, publicKey);
// valid = true ‚Üí allkiri on ehtne
// valid = false ‚Üí midagi on valesti (v√µltsing v√µi muudatus)
```

---

## 5. Ajatemplid (RFC 3161)

### Aja probleem

Sa allkirjastasid dokumendi. Aga **millal** sa seda tegid?

Sinu arvuti v√µib n√§idata suvalist aega. Kuidas t√µestada, et allkiri tehti just 30. jaanuaril 2026, mitte eile?

### Lahendus: Usaldusv√§√§rne tunnistaja

Kujuta ette notarit, kes:
1. Vaatab sinu dokumenti
2. Kirjutab √ºles praeguse aja
3. Paneb oma pitseri
4. Annab sulle t√µendi

N√º√ºd sul on **s√µltumatu aja kinnitus**.

### RFC 3161 ‚Äî ajatemplite standard

**RFC** = Request for Comments ‚Äî nii nimetatakse internetistandardeid.

**RFC 3161** ‚Äî see on 2001. aasta standard, mis kirjeldab:
- Kuidas ajatemplit k√ºsida
- Kuidas seda saada
- Kuidas kontrollida

### TSA ‚Äî Time-Stamp Authority

**TSA** = Ajatemplite server (nagu digitaalne notar).

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Klient  ‚îÇ ‚îÄ‚îÄ "Pane tempel    ‚îÇ   TSA    ‚îÇ
‚îÇ          ‚îÇ    sellele r√§sile"‚Üí‚îÇ          ‚îÇ
‚îÇ          ‚îÇ                    ‚îÇ (Aja     ‚îÇ
‚îÇ          ‚îÇ ‚Üê‚îÄ‚îÄ Siin on token  ‚îÇ  notar)  ‚îÇ
‚îÇ          ‚îÇ     ajaga ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Mida token sisaldab

```
TimeStampToken:
‚îú‚îÄ‚îÄ genTime: 2026-01-30T15:30:00Z  ‚Üê Millal v√§ljastati
‚îú‚îÄ‚îÄ serialNumber: 123456789        ‚Üê Unikaalne number
‚îú‚îÄ‚îÄ messageImprint: abc123...      ‚Üê R√§si, mida templiti
‚îú‚îÄ‚îÄ policy: 1.2.3.4.5.6            ‚Üê TSA reeglid
‚îî‚îÄ‚îÄ signature: xyz789...           ‚Üê TSA allkiri
```

### Oluline: mida me templime

Aletheia's me templime **allkirja**, mitte teksti:

```
AI tekst ‚Üí r√§si ‚Üí allkiri ‚Üí ajatempel(allkiri)
                              ‚Üë
                        Seda templime!
```

Miks nii:
- **Meie** kinnitame **mida** AI √ºtles (allkiri)
- **TSA** kinnitab **millal** me selle allkirjastasime (tempel)

See on PKI-s standardne l√§henemine.

---

## 6. PKI ‚Äî Avaliku v√µtme infrastruktuur

### Usalduse probleem

Sa said avaliku v√µtme. Aga kust sa tead, et see on **√µige** inimese **√µige** v√µti?

V√µib-olla r√ºndaja asendas v√µtme omaga?

### Lahendus: Usaldusahel

Kujuta ette k√§enduss√ºsteemi:

```
Valitsus
    ‚Üì usaldab
Ministeerium
    ‚Üì usaldab
√úlikool
    ‚Üì usaldab
Tudeng J√ºri
```

Kui sa usaldad valitsust, saad usaldada J√ºrit l√§bi ahela.

### X.509 sertifikaadid

**Sertifikaat** ‚Äî see on "pass" avaliku v√µtme jaoks:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           SERTIFIKAAT              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Omanik: Aletheia AI                ‚îÇ
‚îÇ Avalik v√µti: MIIBIjANBg...         ‚îÇ
‚îÇ Kehtiv: 2026-01-01 ‚Äî 2027-01       ‚îÇ
‚îÇ V√§ljaandja: DigiCert CA            ‚îÇ
‚îÇ V√§ljaandja allkiri: MEUCIQD...     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### CA ‚Äî Certificate Authority

**CA** = Sertifitseerimiskeskus (nagu passiamet).

Tuntud CA-d:
- DigiCert
- Let's Encrypt
- GlobalSign

Brauserid ja operatsioonis√ºsteemid **usaldavad** neid CA-sid vaikimisi.

### Ahel Aletheia's

```
Root CA (juur)
    ‚Üì
TSA CA (ajatemplite jaoks)
    ‚Üì
TSA Server (v√§ljastab templeid)
    ‚Üì
Meie token (ajatempliga)
```

---

## 7. eIDAS ‚Äî Euroopa usaldusreeglid

### Mis see on

**eIDAS** = electronic IDentification, Authentication and trust Services

See on **EL seadus** (M√§√§rus 910/2014), mis √ºtleb:
> "Elektrooniline allkiri on juriidiliselt kehtiv, kui vastab n√µuetele."

### Allkirjade tasemed

| Tase | Nimetus | Juriidiline j√µud |
|------|---------|------------------|
| P√µhi | Elektrooniline allkiri | Aktsepteeritakse, aga saab vaidlustada |
| Keskmine | T√§iustatud allkiri | Raskem vaidlustada |
| K√µrgeim | Kvalifitseeritud allkiri | = omak√§eline allkiri |

### Kvalifitseeritud TSA

**Kvalifitseeritud TSA** ‚Äî see on TSA, mis:
- On l√§binud auditi
- On kantud EL usaldusnimekirja
- Tema templid on kohtus juriidiliselt kehtivad

### Aletheia ja eIDAS

Meie PoC on **eIDAS-iga √ºhilduv**:
- Arhitektuur v√µimaldab √ºhendada kvalifitseeritud TSA
- Formaadid on standardsed (RFC 3161)
- Saab "uuendada" juriidilise j√µuni

Aga PoC jaoks kasutame lokaalset TSA-d (lihtsam ja tasuta).

---

## 8. MOCK_TSA ‚Äî Simulaator testide jaoks

### Testimise probleem

P√§ris TSA:
- N√µuab internetti
- Tagastab **erineva** aja iga kord
- V√µib olla k√§ttesaamatu
- Maksab raha

Kuidas testida koodi, kui tulemus on alati erinev?

### Lahendus: Deterministlik simulaator

**MOCK_TSA** ‚Äî see on "m√§ngu" TSA, mis:
- T√∂√∂tab lokaalselt (ilma internetita)
- Tagastab alati **sama** tulemuse
- Kohene (pole vaja oodata)
- Tasuta

### Mida t√§hendab "deterministlik"

```
Deterministlik = ennustatav

Sisend A ‚Üí alati v√§ljund B
Sisend A ‚Üí alati v√§ljund B
Sisend A ‚Üí alati v√§ljund B
...igavesti...
```

Pole juhust. Pole s√µltuvust ajast.

### Kuidas MOCK_TSA saavutab determinismi

| Element | P√§ris TSA | MOCK_TSA |
|---------|-----------|----------|
| Aeg | P√§ris kell | Fikseeritud: `2026-01-01T00:00:00Z` |
| Serial | Loendur baasis | Arvutatakse r√§sist |
| Allkiri | V√µib olla juhuslik | RSA PKCS#1 v1.5 (deterministlik) |

### N√§ide

```java
// Esimene kutse
byte[] token1 = mockTsa.respond(request);

// Teine kutse (p√§ev hiljem, teises arvutis)
byte[] token2 = mockTsa.respond(request);

// Tulemus
assertArrayEquals(token1, token2); // ‚úÖ Identsed!
```

### Miks seda vaja on

1. **Testid ei l√§bi juhuslikult** (pole "flaky tests")
2. **Saab v√µrrelda n√§idistega** (golden fixtures)
3. **CI/CD t√∂√∂tab ilma internetita**
4. **Arendus on kiirem** (pole vaja p√§ris TSA-d)

---

## 9. Cryptographic Oracle ‚Äî Etalonvastused

### Mis on Oracle

Testimises **Oracle** = √µige vastuse allikas.

Kujuta ette matemaatika√µpetajat:
- Sa lahendad √ºlesannet
- √ïpetaja teab √µiget vastust
- Sa v√µrdled ‚Äî kas kattub v√µi mitte

Oracle on "√µpetaja" koodi jaoks.

### Cryptographic Oracle

Kr√ºptograafia jaoks Oracle on **teadaolev √µige tulemus**:

```
Sisend: "hello world"
Oracle: r√§si = "b94d27b9934d3e08a52e52d7da7dabfac484efe37a5380ee9088f7ace2efcde9"
```

Kui sinu kood annab teise r√§si ‚Äî see on katki.

### Oracle'i t√º√ºbid Aletheia's

| T√º√ºp | Mida kontrollib | N√§ide |
|------|-----------------|-------|
| Hash Oracle | SHA-256 t√∂√∂tab √µigesti | "hello" ‚Üí "2cf24..." |
| Signature Oracle | RSA allkiri on korrektne | hash ‚Üí signature bytes |
| Timestamp Oracle | MOCK_TSA on deterministlik | request ‚Üí token bytes |
| LLM Oracle | LLM stub on ennustatav | prompt ‚Üí fixed response |

### Miks see on oluline

Kr√ºptograafia on valdkond, kus **"peaaegu √µige" = t√§iesti katki**.

Kui r√§si erineb kasv√µi 1 biti v√µrra ‚Äî verifitseerimine ei l√§bi.

Oracle garanteerib: kood t√∂√∂tab **t√§pselt** nagu peab.

---

## 10. Golden Fixtures ‚Äî Kuldsed n√§idised

### Mis see on

**Golden Fixture** = fail "etalon" tulemusega, salvestatud Gitis.

```
fixtures/
‚îú‚îÄ‚îÄ hashes/
‚îÇ   ‚îî‚îÄ‚îÄ hello-world-sha256.bin    ‚Üê √ïige r√§si
‚îú‚îÄ‚îÄ signatures/
‚îÇ   ‚îî‚îÄ‚îÄ test-message-rsa.sig      ‚Üê √ïige allkiri
‚îî‚îÄ‚îÄ timestamps/
    ‚îî‚îÄ‚îÄ hello-world.tsr           ‚Üê √ïige token
```

### Kuidas kasutatakse

```java
@Test
void testHashMatchesGoldenFixture() {
    // 1. Arvutame r√§si
    byte[] actual = sha256("hello world");
    
    // 2. Laadime etaloni
    byte[] expected = loadFixture("hashes/hello-world-sha256.bin");
    
    // 3. V√µrdleme
    assertArrayEquals(expected, actual);
    // Kui ei kattu ‚Äî test l√§bib!
}
```

### Miks fixture'id on vajalikud

1. **Regressioonitestimine**
   - Uuendasime teeki ‚Üí kontrollisime, et tulemus ei muutunud

2. **Dokumentatsioon**
   - Fixture on konkreetne n√§ide "kuidas peab olema"

3. **Silumine**
   - Saab v√µrrelda "mis tuli" vs "mida oodati" bait-baidi haaval

4. **CI/CD**
   - Automaatne kontroll igal commit'il

### Manifest ‚Äî fixture'ide metaandmed

Iga fixture'ide kaust sisaldab `manifest.json`:

```json
{
  "version": "1.0",
  "generated_at": "2026-01-30T17:30:00Z",
  "fixtures": [
    {
      "name": "hello-world",
      "input": "hello world",
      "hash_hex": "b94d27b9..."
    }
  ]
}
```

See aitab m√µista:
- Millal fixture loodi
- Millest see saadi
- Mis algoritmi versioon

---

## 11. Testimine ‚Äî Miks seda vaja on

### Testimise tasemed

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           E2E (End-to-End)              ‚îÇ  ‚Üê K√µik koos
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         Integration Tests               ‚îÇ  ‚Üê Komponendid koos
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ            Unit Tests                   ‚îÇ  ‚Üê √úksikud funktsioonid
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Unit Tests ‚Äî Aatomilised kontrollid

Kontrollime **√ºhte** funktsiooni isoleeritult:

```java
@Test
void sha256_peab_olema_deterministlik() {
    byte[] hash1 = sha256("test");
    byte[] hash2 = sha256("test");
    
    assertArrayEquals(hash1, hash2);
}
```

### Integration Tests ‚Äî Komponentide sidemed

Kontrollime, et komponendid t√∂√∂tavad **koos**:

```java
@Test
void t√§ielik_allkirjastamise_ja_verifitseerimise_voog() {
    // Hash ‚Üí Sign ‚Üí Verify
    byte[] hash = hashService.sha256(text);
    byte[] sig = signatureService.sign(hash);
    boolean valid = signatureService.verify(hash, sig);
    
    assertTrue(valid);
}
```

### Mocking ‚Äî S√µltuvuste asendamine

**Mock** = p√§ris komponendi "maketi".

Miks:
- Mitte s√µltuda v√§listest teenustest
- Kontrollida tulemust
- Kiirendada teste

```java
// P√§ris LLM asemel ‚Äî mock
LLMStub llm = new LLMStub();
llm.addResponse("Mis on Prantsusmaa pealinn?", "Pariis");

String answer = llm.complete("Mis on Prantsusmaa pealinn?");
assertEquals("Pariis", answer); // Alati sama!
```

### Testimise Mermaid diagramm

Me lisasime visuaalse diagrammi dokumentatsiooni:

```
LLM Output ‚Üí Hash ‚Üí Test Type?
                     ‚îú‚îÄ‚îÄ Unit ‚Üí MOCK_TSA ‚Üí Golden Fixture
                     ‚îú‚îÄ‚îÄ Integration ‚Üí Local TSA ‚Üí Verify
                     ‚îî‚îÄ‚îÄ Audit ‚Üí LLM Stub + Logging ‚Üí Compliance
```

See aitab arendajatel m√µista, millist testi t√º√ºpi kasutada.

---

## 12. Agent Audit Model ‚Äî AI tegevuste audit

### Probleem: AI teeb otsuseid

Kujuta ette: AI-agent tellib firmal kaupa.

Kuu hiljem k√ºsimus:
> "Miks AI tellis 1000 tooli 100 asemel?"

Kuidas vastata, kui logisid pole?

### Lahendus: Audit Trail

**Audit Trail** = "j√§lg" k√µigist AI tegevustest.

Iga tegevuse kohta kirjutame:

```json
{
  "agent_id": "logistics-agent-v1",
  "timestamp": "2026-01-30T15:00:00Z",
  "prompt": "Mitu tooli tellida?",
  "response": "Soovitan tellida 1000 tooli...",
  "model": "gpt-4",
  "parameters": {
    "temperature": 0.2
  }
}
```

### Kr√ºptograafiline kaitse

Lihtsaid logisid saab v√µltsida. Seep√§rast:

```
Kirje ‚Üí R√§si ‚Üí Allkiri ‚Üí Ajatempel
```

N√º√ºd:
- **Ei saa muuta** kirjet (r√§si ei kattu)
- **Ei saa eitada** autorlust (allkiri)
- **Ei saa v√µltsida** aega (TSA token)

### Non-repudiation ‚Äî Eitamatus

**Non-repudiation** = v√µimatus eitada tegevust.

Kui AI allkirjastas otsuse ‚Äî tema (t√§psemalt s√ºsteem) ei saa √∂elda "mina seda ei teinud".

See on oluline:
- Juriidiliste vaidluste jaoks
- Turvaauditi jaoks
- Regulatsioonidele vastavuse jaoks (compliance)

---

## 13. Mida me t√§na lisasime

### Hommikul: Dokumentatsioon ja diagrammid

1. **Mermaid diagramm** TESTING_STRATEGY.md-s
   - Visuaalne testimise t√∂√∂voog
   - Unit / Integration / Audit vood
   - V√§rviline kodeerimine

2. **Golden Fixtures Branch Strategy**
   - Kuidas hoida fixture'id Gitis
   - CI integratsioon
   - Uuendamise protsess

3. **LLM Stub Audit** laiendus
   - Audit logging compliance testide jaoks

### √ïhtul: Infrastruktuur

4. **docs/en/MOCK_TSA.md** (553 rida)
   - Ingliskeelne dokumentatsiooni versioon
   - Java/Bouncy Castle n√§ited
   - RFC 3161 testvektorid

5. **.env.example** (88 rida)
   - K√µigi keskkonnamuutujate mall
   - Kommentaarid ja n√§ited
   - Turvan√µuanded

6. **docker-compose.yml** (85 rida)
   - PostgreSQL teenus
   - Valikuline TSA
   - Kasutusjuhised

7. **README badges** (5 t√ºkki)
   - Java, Spring Boot, PostgreSQL
   - License, RFC 3161
   - Professionaalne v√§limus

8. **Quick Start** sektsioon
   - 4 sammu k√§ivitamiseks
   - Kopeeri ja t√∂√∂ta

9. **Golden Fixtures struktuur**
   - `backend/src/test/resources/fixtures/`
   - README (335 rida)
   - Manifest'id iga kategooria jaoks

### Commit'id

```
aa1caaa ‚Äî docs: add comprehensive testing strategy and audit model documentation
37b5570 ‚Äî chore: add development infrastructure and golden fixtures structure
```

**Kokku:** +6,570 koodi- ja dokumentatsioonirida.

---

## 14. Terminite s√µnastik

### A-C

| Termin | T√§hendus |
|--------|----------|
| **ASN.1** | Andmestruktuuride kirjelduskeel (nagu JSON, aga binaarne) |
| **Audit Trail** | K√µigi tegevuste logi kontrollimiseks |
| **Bouncy Castle** | Java kr√ºptograafiateek |
| **CA (Certificate Authority)** | Sertifikaate v√§ljaandev organisatsioon |
| **CI/CD** | Continuous Integration/Delivery ‚Äî automaatne ehitamine ja testimine |
| **Compliance** | N√µuetele vastavus (seadused, standardid) |
| **Cryptographic Oracle** | Kr√ºptograafia kontrollimise etalontulemus |

### D-G

| Termin | T√§hendus |
|--------|----------|
| **DER** | ASN.1 binaarne kodeerimisformaat |
| **Deterministic** | Ennustatav: sama sisend ‚Üí sama v√§ljund |
| **Digest** | R√§si teine nimetus |
| **eIDAS** | EL m√§√§rus elektrooniliste allkirjade kohta |
| **Fixture** | Testandmed (n√§idisfailid) |
| **Flaky Test** | Test, mis m√µnikord juhuslikult l√§bib |
| **Golden Fixture** | V√µrdlemise etalonfail |

### H-M

| Termin | T√§hendus |
|--------|----------|
| **Hash** | Andmete fikseeritud pikkusega "s√µrmej√§lg" |
| **Integration Test** | Mitme komponendi sideme test |
| **JUnit** | Java testimisraamistik |
| **LLM** | Large Language Model (ChatGPT jt) |
| **Manifest** | Metaandmete fail (sisu kirjeldus) |
| **Mermaid** | Diagrammide joonistamise keel Markdownis |
| **Mock** | Maketi/t√ºhikasi testide jaoks |
| **MOCK_TSA** | Deterministlik TSA simulaator |

### N-R

| Termin | T√§hendus |
|--------|----------|
| **Non-repudiation** | V√µimatus eitada tegevust |
| **Nonce** | √úhekordne juhuslik arv |
| **PEM** | V√µtmete ja sertifikaatide tekstiformaat |
| **PKI** | Public Key Infrastructure ‚Äî v√µtmeinfrastruktuur |
| **PKCS#1** | RSA kr√ºptograafia standard |
| **Policy OID** | Poliitika (reeglite) identifikaator |
| **Regression Test** | Halvenemiste puudumise test |
| **RFC** | Request for Comments ‚Äî internetistandard |
| **RSA** | As√ºmmeetrilise kr√ºptograafia algoritm |

### S-Z

| Termin | T√§hendus |
|--------|----------|
| **Serial Number** | Unikaalne number (token, sertifikaat) |
| **SHA-256** | R√§simisalgoritm (256 bitti) |
| **Signature** | Digitaalallkiri |
| **Spring Boot** | Java backendi raamistik |
| **Stub** | Lihtne t√ºhikasi fikseeritud k√§itumisega |
| **TSA** | Time-Stamp Authority ‚Äî ajatemplite server |
| **TSQ** | TimeStampRequest ‚Äî templi p√§ring |
| **TSR** | TimeStampResponse ‚Äî templiga vastus |
| **Unit Test** | √úhe funktsiooni isoleeritud test |
| **X.509** | Sertifikaatide formaadi standard |

---

## Kokkuv√µte

T√§na me:

1. **Laiendasime dokumentatsiooni** ‚Äî Mermaid diagrammid, LLM Stub audit, Golden Fixtures strategy
2. **L√µime infrastruktuuri** ‚Äî .env.example, docker-compose.yml, fixtures struktuur
3. **Parandasime README** ‚Äî badges, Quick Start, viited fixture'idele
4. **T√µlkisime MOCK_TSA** inglise keelde

K√µik see teeb projekti:
- **Arusaadavamaks** ‚Äî visuaalsed diagrammid ja sammhaaval juhised
- **Professionaalsemaks** ‚Äî badges, struktureeritud fixtures
- **Lihtsamaks arenduses** ‚Äî Quick Start 5 minutiga

Aletheia AI ‚Äî see pole lihtsalt "allkirjastame AI vastuseid". See on **kr√ºptograafiliselt verifitseeritav s√ºsteem** t√§ieliku audit trail'iga, deterministliku testimisega ja Euroopa standarditega (eIDAS) √ºhilduvusega.

**Tulevik:** PKI tehisintellektile on tee usaldusv√§√§rsete autonoomsete s√ºsteemide poole, kus iga otsus on t√µestatav, iga agent on identifitseeritud ja iga tegevust saab j√§lgida.

---

**Autor:** Anton Sokolov  
**Kuup√§ev:** 30. jaanuar 2026  
**Projekt:** Aletheia AI ‚Äî Verifiable AI Responses

---

*"Aletheia" (·ºàŒªŒÆŒ∏ŒµŒπŒ±) ‚Äî t√µde, mida ei saa varjata.*
