spring.application.name=aletheia-backend

# Load .env from project root (when running from backend/). Optional = no error if missing.
spring.config.import=optional:file:../.env[.properties]

# H2 file-based for local dev (data persists; use H2 console at /h2-console to query)
# Override with PostgreSQL via env, or jdbc:h2:mem:aletheia for in-memory
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:file:./data/aletheia;DB_CLOSE_DELAY=-1}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.h2.console.enabled=true
# Dialect: H2 (default) or PostgreSQL when using Postgres. Set via env when needed.
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}
# Flyway owns schema; do not let Hibernate auto-create tables
spring.jpa.hibernate.ddl-auto=none

# Signing key PEM path (required for /ask and signing). Generate: openssl genpkey -algorithm RSA -out ai.key -pkeyopt rsa_keygen_bits:2048
# Set via env: AI_ALETHEIA_SIGNING_KEY_PATH
ai.aletheia.signing.key-path=${AI_ALETHEIA_SIGNING_KEY_PATH:}

# TSA (Time-Stamp Authority): mock (deterministic, no network) or real (HTTP to external TSA)
# mode=mock → MockTsaServiceImpl. mode=real → RealTsaServiceImpl (requires ai.aletheia.tsa.url)
ai.aletheia.tsa.mode=${AI_ALETHEIA_TSA_MODE:mock}
ai.aletheia.tsa.url=${AI_ALETHEIA_TSA_URL:}

# CORS: allowed origins for frontend (comma-separated). Default: Next.js dev server.
ai.aletheia.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}

# LLM (OpenAI). Set OPENAI_API_KEY for real calls; omit for mock-only (tests).
ai.aletheia.llm.openai.api-key=${OPENAI_API_KEY:}
ai.aletheia.llm.openai.model=${OPENAI_MODEL:gpt-4}

# SpringDoc OpenAPI + Swagger UI
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.show-actuator=false
