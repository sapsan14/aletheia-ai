# ============================================
# Aletheia AI — Environment Variables Template
# ============================================
# Copy this file to .env and fill in your values
# Note: .env should be in .gitignore (never commit secrets!)

# --------------------------------------------
# Backend Configuration
# --------------------------------------------

# Database: H2 file-based for local dev (no PostgreSQL needed)
# Data persists in backend/data/aletheia.mv.db; H2 console at /h2-console
SPRING_DATASOURCE_URL=jdbc:h2:file:./data/aletheia;DB_CLOSE_DELAY=-1
SPRING_DATASOURCE_USERNAME=sa
SPRING_DATASOURCE_PASSWORD=
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.H2Dialect

# For PostgreSQL (production): comment out H2 above, uncomment below
# SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/aletheia
# SPRING_DATASOURCE_USERNAME=aletheia
# SPRING_DATASOURCE_PASSWORD=your_db_password_here
# SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.PostgreSQLDialect

# H2 in-memory (CI or ephemeral): no persistence
# SPRING_DATASOURCE_URL=jdbc:h2:mem:aletheia

# Signing key path (required for signing operations)
# Generate: openssl genpkey -algorithm RSA -out ai.key -pkeyopt rsa_keygen_bits:2048
# Use absolute path or ../ai.key when running from backend/
# See docs/en/CRYPTO_REFERENCE.md for all keys and algorithms
AI_ALETHEIA_SIGNING_KEY_PATH=/path/to/ai.key

# PQC (post-quantum) signing — optional; adds ML-DSA (Dilithium3) signature over same hash
# Generate: cd backend && mvn -q compile exec:java -Dexec.mainClass="ai.aletheia.crypto.PqcKeyGen" -Dexec.args="."
# Creates ai_pqc.key and ai_pqc_public.pem in backend/ (do not commit). See docs/en/PLAN_PQC.md
AI_ALETHEIA_PQC_ENABLED=false
AI_ALETHEIA_PQC_KEY_PATH=

# TSA (Time-Stamp Authority) configuration
# Mode: mock (deterministic, no network) or real (HTTP to external TSA)
# Default: real with DigiCert for production. Use mock for tests or offline dev.
AI_ALETHEIA_TSA_MODE=real

# TSA URL when mode=real. DigiCert is the default
AI_ALETHEIA_TSA_URL=http://timestamp.digicert.com

# CORS: allowed origins for frontend (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000

# ngrok (for Ansible deploy with ngrok_enabled=true)
# Get token at https://dashboard.ngrok.com/get-started/your-authtoken
NGROK_AUTHTOKEN=

# --------------------------------------------
# LLM Provider Configuration (choose one)
# --------------------------------------------

# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=1.0
OPENAI_MAX_TOKENS=2000

# OR Gemini
# GEMINI_API_KEY=your-gemini-api-key-here
# GEMINI_MODEL=gemini-pro

# OR Mistral
# MISTRAL_API_KEY=your-mistral-api-key-here
# MISTRAL_MODEL=mistral-medium

# --------------------------------------------
# Frontend Configuration
# --------------------------------------------

# Backend API URL (for Next.js frontend; client-side fetch). Baked in at build time.
# Empty = relative /api URLs; the runtime proxy (frontend/app/api/[...path]/route.ts) forwards
# /api/* to BACKEND_INTERNAL_URL. Use empty for ngrok single-tunnel deploy (see deploy/ansible/README.md).
NEXT_PUBLIC_API_URL=http://localhost:8080

# Backend URL for the Next.js runtime proxy (/api/* → backend). Read at request time in the frontend
# container. Docker Compose sets http://backend:8080 so the proxy reaches the backend container.
# Only needed when running frontend in Docker; see deploy/ansible/README.md#api-proxy-docker.
# BACKEND_INTERNAL_URL=http://backend:8080

# --------------------------------------------
# Development / Testing
# --------------------------------------------

# H2 Console (dev only)
SPRING_H2_CONSOLE_ENABLED=true

# Spring Boot profiles
# Options: dev, test, prod
SPRING_PROFILES_ACTIVE=dev

# Logging level
LOGGING_LEVEL_AI_ALETHEIA=DEBUG

# SpringDoc OpenAPI / Swagger UI
SPRINGDOC_API_DOCS_PATH=/v3/api-docs
SPRINGDOC_SWAGGER_UI_PATH=/swagger-ui.html
SPRINGDOC_SHOW_ACTUATOR=false

# --------------------------------------------
# Optional: Docker Compose Overrides
# --------------------------------------------

# PostgreSQL Docker configuration
POSTGRES_DB=aletheia
POSTGRES_USER=aletheia
POSTGRES_PASSWORD=local_dev_password

# --------------------------------------------
# Security Notes
# --------------------------------------------
# - Never commit this file with real secrets to Git
# - Use environment-specific .env files (.env.dev, .env.prod)
# - For production: use secret management (AWS Secrets Manager, HashiCorp Vault, etc.)
# - For CI/CD: use GitHub Secrets or equivalent
